<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if form.instance.id %}تعديل{% else %}إضافة{% endif %} بريد صادر</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/form.css' %}">
</head>
<body>
    <div class="form-container">
        <h1>{% if form.instance.id %}تعديل{% else %}إضافة{% endif %} بريد صادر</h1>

        <form action="{% if form.instance.id %}{% url 'edit_outgoing' form.instance.id %}{% else %}{% url 'add_outgoing' %}{% endif %}" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="input-group">
                <label for="reg_number">رقم الرسالة:</label>
                <input type="text" id="reg_number" name="reg_number" value="{{ form.reg_number.value|default:'' }}" required>
            </div>
    
            <div class="input-group date-input-container">
                <label for="out_date">التاريخ:</label>
                <input type="text" id="out_date" name="out_date" required placeholder="YYYY-MM-DD" style="direction: ltr; text-align: right;">
                <input type="date" id="out_date_native" name="out_date_native" style="display:none;" onchange="document.getElementById('out_date').value = this.value">
            </div>
    
            <div class="input-group">
                <label for="dept_from">من:</label>
                <input type="text" id="dept_from" name="dept_from" value="{{ form.dept_from.value|default:'' }}" required>
            </div>
    
            <div class="input-group">
                <label for="dept_to">إلى:</label>
                <input type="text" id="dept_to" name="dept_to" value="{{ form.dept_to.value|default:'' }}" required>
            </div>
    
            <div class="input-group">
                <label for="title">العنوان:</label>
                <input type="text" id="title" name="title" value="{{ form.title.value|default:'' }}" required>
            </div>
    
            <div class="input-group">
                <label for="keywords">الكلمات المفتاحية:</label>
                <input type="text" id="keywords" name="keywords" value="{{ form.keywords.value|default:'' }}">
            </div>
    
            <div class="input-group">
                <label for="pdf_file">ملف PDF الرئيسي:</label>
                <input type="file" id="pdf_file" name="pdf_file" accept="application/pdf">
                {% if form.instance.pdf_file %}
                    <p>Current file: {{ form.instance.pdf_file.name }}</p>
                {% endif %}
            </div>
    
            <div class="input-group">
                <label for="attach">ملف PDF مرفق:</label>
                <input type="file" id="attach" name="attach" accept="application/pdf">
            </div>
    
            <div class="button-group">
                <button type="submit">حفظ</button>
                <a href="{% url 'outgoing_mail' %}" class="cancel-button">إلغاء</a>
            </div>
        </form>
    </div>
    <script src="{% static 'js/date.js' %}" defer></script>
</body>
</html>
